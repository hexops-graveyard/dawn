{"src/dawn/common/GPUInfo_autogen.h": "// Copyright 2022 The Dawn Authors\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n#ifndef SRC_DAWN_COMMON_GPUINFO_AUTOGEN_H_\n#define SRC_DAWN_COMMON_GPUINFO_AUTOGEN_H_\n\n#include <cstdint>\n#include <string>\n\nusing PCIVendorID = uint32_t;\nusing PCIDeviceID = uint32_t;\n\nnamespace gpu_info {\n\n// Vendor IDs\nstatic constexpr PCIVendorID kVendorID_AMD = 0x1002;\nstatic constexpr PCIVendorID kVendorID_Apple = 0x106b;\nstatic constexpr PCIVendorID kVendorID_ARM = 0x13B5;\nstatic constexpr PCIVendorID kVendorID_Google = 0x1AE0;\nstatic constexpr PCIVendorID kVendorID_ImgTec = 0x1010;\nstatic constexpr PCIVendorID kVendorID_Intel = 0x8086;\nstatic constexpr PCIVendorID kVendorID_Mesa = 0x10005;\nstatic constexpr PCIVendorID kVendorID_Microsoft = 0x1414;\nstatic constexpr PCIVendorID kVendorID_Nvidia = 0x10DE;\nstatic constexpr PCIVendorID kVendorID_Qualcomm = 0x5143;\nstatic constexpr PCIVendorID kVendorID_Samsung = 0x144d;\n\n// Vendor checks\nbool IsAMD(PCIVendorID vendorId);\nbool IsApple(PCIVendorID vendorId);\nbool IsARM(PCIVendorID vendorId);\nbool IsGoogle(PCIVendorID vendorId);\nbool IsImgTec(PCIVendorID vendorId);\nbool IsIntel(PCIVendorID vendorId);\nbool IsMesa(PCIVendorID vendorId);\nbool IsMicrosoft(PCIVendorID vendorId);\nbool IsNvidia(PCIVendorID vendorId);\nbool IsQualcomm(PCIVendorID vendorId);\nbool IsSamsung(PCIVendorID vendorId);\n\n// Architecture checks\n\n// AMD architectures\nbool IsAMDGCN2(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsAMDGCN5(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsAMDRDNA2(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsAMDGCN1(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsAMDGCN3(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsAMDGCN4(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsAMDRDNA1(PCIVendorID vendorId, PCIDeviceID deviceId);\n\n// ARM architectures\nbool IsARMMidgard(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsARMBifrost(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsARMValhall(PCIVendorID vendorId, PCIDeviceID deviceId);\n\n// Google architectures\nbool IsGoogleSwiftshader(PCIVendorID vendorId, PCIDeviceID deviceId);\n\n// Intel architectures\nbool IsIntelGen7(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsIntelGen8(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsIntelGen9(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsIntelGen11(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsIntelGen12LP(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsIntelGen12HP(PCIVendorID vendorId, PCIDeviceID deviceId);\n\n// Microsoft architectures\nbool IsMicrosoftWARP(PCIVendorID vendorId, PCIDeviceID deviceId);\n\n// Nvidia architectures\nbool IsNvidiaFermi(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsNvidiaKepler(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsNvidiaMaxwell(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsNvidiaPascal(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsNvidiaTuring(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsNvidiaAmpere(PCIVendorID vendorId, PCIDeviceID deviceId);\n\n// Qualcomm architectures\nbool IsQualcommAdreno4xx(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsQualcommAdreno5xx(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsQualcommAdreno6xx(PCIVendorID vendorId, PCIDeviceID deviceId);\nbool IsQualcommAdreno7xx(PCIVendorID vendorId, PCIDeviceID deviceId);\n\n// Samsung architectures\nbool IsSamsungRDNA2(PCIVendorID vendorId, PCIDeviceID deviceId);\n\n// GPUAdapterInfo fields\nstd::string GetVendorName(PCIVendorID vendorId);\nstd::string GetArchitectureName(PCIVendorID vendorId, PCIDeviceID deviceId);\n\n} // namespace gpu_info\n#endif  // SRC_DAWN_COMMON_GPUINFO_AUTOGEN_H_\n", "src/dawn/common/GPUInfo_autogen.cpp": "// Copyright 2022 The Dawn Authors\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n#include <algorithm>\n#include <array>\n#include <sstream>\n#include <iomanip>\n\n#include \"dawn/common/GPUInfo_autogen.h\"\n\n#include \"dawn/common/Assert.h\"\n\nnamespace gpu_info {\n\nnamespace {\n\nenum class Architecture {\n    Unknown,\n    AMD_GCN2,\n    AMD_GCN5,\n    AMD_RDNA2,\n    AMD_GCN1,\n    AMD_GCN3,\n    AMD_GCN4,\n    AMD_RDNA1,\n    ARM_Midgard,\n    ARM_Bifrost,\n    ARM_Valhall,\n    Google_Swiftshader,\n    Intel_Gen7,\n    Intel_Gen8,\n    Intel_Gen9,\n    Intel_Gen11,\n    Intel_Gen12LP,\n    Intel_Gen12HP,\n    Microsoft_WARP,\n    Nvidia_Fermi,\n    Nvidia_Kepler,\n    Nvidia_Maxwell,\n    Nvidia_Pascal,\n    Nvidia_Turing,\n    Nvidia_Ampere,\n    Qualcomm_Adreno4xx,\n    Qualcomm_Adreno5xx,\n    Qualcomm_Adreno6xx,\n    Qualcomm_Adreno7xx,\n    Samsung_RDNA2,\n};\n\nArchitecture GetArchitecture(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    switch(vendorId) {\n        case kVendorID_AMD: {\n            switch (deviceId & 0xFF00) {\n                case 0x1300:\n                    return Architecture::AMD_GCN2;\n                case 0x1500:\n                case 0x1600:\n                    return Architecture::AMD_GCN5;\n                case 0x7400:\n                    return Architecture::AMD_RDNA2;\n            }\n            switch (deviceId & 0xFFF0) {\n                case 0x6600:\n                case 0x6610:\n                case 0x6660:\n                case 0x6790:\n                case 0x6800:\n                case 0x6810:\n                case 0x6820:\n                case 0x6830:\n                    return Architecture::AMD_GCN1;\n                case 0x6640:\n                case 0x6650:\n                case 0x67A0:\n                case 0x67B0:\n                case 0x9830:\n                case 0x9850:\n                    return Architecture::AMD_GCN2;\n                case 0x6900:\n                case 0x6920:\n                case 0x6930:\n                case 0x7300:\n                case 0x9870:\n                case 0x98E0:\n                    return Architecture::AMD_GCN3;\n                case 0x67C0:\n                case 0x67D0:\n                case 0x67E0:\n                case 0x67F0:\n                case 0x6980:\n                case 0x6990:\n                    return Architecture::AMD_GCN4;\n                case 0x66A0:\n                case 0x6860:\n                case 0x6870:\n                case 0x6940:\n                case 0x69A0:\n                    return Architecture::AMD_GCN5;\n                case 0x7310:\n                case 0x7340:\n                case 0x7360:\n                    return Architecture::AMD_RDNA1;\n                case 0x73A0:\n                case 0x73B0:\n                case 0x73D0:\n                case 0x73E0:\n                case 0x73F0:\n                    return Architecture::AMD_RDNA2;\n            }\n        } break;\n        case kVendorID_ARM: {\n            switch (deviceId & 0xF0000000) {\n                case 0x00000000:\n                    return Architecture::ARM_Midgard;\n                case 0x60000000:\n                case 0x70000000:\n                    return Architecture::ARM_Bifrost;\n                case 0x90000000:\n                case 0xA0000000:\n                    return Architecture::ARM_Valhall;\n            }\n        } break;\n        case kVendorID_Google: {\n            switch (deviceId) {\n                case 0xC0DE:\n                    return Architecture::Google_Swiftshader;\n            }\n        } break;\n        case kVendorID_Intel: {\n            switch (deviceId & 0xFF00) {\n                case 0x0100:\n                case 0x0400:\n                case 0x0A00:\n                case 0x0D00:\n                case 0x0F00:\n                    return Architecture::Intel_Gen7;\n                case 0x1600:\n                case 0x2200:\n                    return Architecture::Intel_Gen8;\n                case 0x1900:\n                case 0x3100:\n                case 0x3E00:\n                case 0x5A00:\n                case 0x5900:\n                case 0x9B00:\n                    return Architecture::Intel_Gen9;\n                case 0x8A00:\n                    return Architecture::Intel_Gen11;\n                case 0x4600:\n                case 0x4C00:\n                case 0x4900:\n                case 0x9A00:\n                    return Architecture::Intel_Gen12LP;\n                case 0x4F00:\n                case 0x5600:\n                    return Architecture::Intel_Gen12HP;\n            }\n        } break;\n        case kVendorID_Microsoft: {\n            switch (deviceId) {\n                case 0x8c:\n                    return Architecture::Microsoft_WARP;\n            }\n        } break;\n        case kVendorID_Nvidia: {\n            switch (deviceId & 0xFF00) {\n                case 0x0D00:\n                    return Architecture::Nvidia_Fermi;\n                case 0x0F00:\n                case 0x1000:\n                case 0x1100:\n                case 0x1200:\n                    return Architecture::Nvidia_Kepler;\n                case 0x1300:\n                case 0x1400:\n                case 0x1600:\n                case 0x1700:\n                    return Architecture::Nvidia_Maxwell;\n                case 0x1500:\n                case 0x1B00:\n                case 0x1C00:\n                case 0x1D00:\n                    return Architecture::Nvidia_Pascal;\n                case 0x1E00:\n                case 0x1F00:\n                case 0x2100:\n                    return Architecture::Nvidia_Turing;\n                case 0x2200:\n                case 0x2400:\n                case 0x2500:\n                    return Architecture::Nvidia_Ampere;\n            }\n        } break;\n        case kVendorID_Qualcomm: {\n            switch (deviceId & 0xFF000000) {\n                case 0x04000000:\n                    return Architecture::Qualcomm_Adreno4xx;\n                case 0x05000000:\n                    return Architecture::Qualcomm_Adreno5xx;\n                case 0x06000000:\n                    return Architecture::Qualcomm_Adreno6xx;\n                case 0x07000000:\n                    return Architecture::Qualcomm_Adreno7xx;\n            }\n        } break;\n        case kVendorID_Samsung: {\n            switch (deviceId) {\n                case 0x73A0:\n                    return Architecture::Samsung_RDNA2;\n            }\n        } break;\n    }\n\n    return Architecture::Unknown;\n}\n\n\n}  // namespace\n\n// Vendor checks\nbool IsAMD(PCIVendorID vendorId) {\n    return vendorId == kVendorID_AMD;\n}\nbool IsApple(PCIVendorID vendorId) {\n    return vendorId == kVendorID_Apple;\n}\nbool IsARM(PCIVendorID vendorId) {\n    return vendorId == kVendorID_ARM;\n}\nbool IsGoogle(PCIVendorID vendorId) {\n    return vendorId == kVendorID_Google;\n}\nbool IsImgTec(PCIVendorID vendorId) {\n    return vendorId == kVendorID_ImgTec;\n}\nbool IsIntel(PCIVendorID vendorId) {\n    return vendorId == kVendorID_Intel;\n}\nbool IsMesa(PCIVendorID vendorId) {\n    return vendorId == kVendorID_Mesa;\n}\nbool IsMicrosoft(PCIVendorID vendorId) {\n    return vendorId == kVendorID_Microsoft;\n}\nbool IsNvidia(PCIVendorID vendorId) {\n    return vendorId == kVendorID_Nvidia;\n}\nbool IsQualcomm(PCIVendorID vendorId) {\n    return vendorId == kVendorID_Qualcomm;\n}\nbool IsSamsung(PCIVendorID vendorId) {\n    return vendorId == kVendorID_Samsung;\n}\n\n// Architecture checks\n\n// AMD architectures\nbool IsAMDGCN2(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::AMD_GCN2;\n}\nbool IsAMDGCN5(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::AMD_GCN5;\n}\nbool IsAMDRDNA2(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::AMD_RDNA2;\n}\nbool IsAMDGCN1(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::AMD_GCN1;\n}\nbool IsAMDGCN3(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::AMD_GCN3;\n}\nbool IsAMDGCN4(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::AMD_GCN4;\n}\nbool IsAMDRDNA1(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::AMD_RDNA1;\n}\n// ARM architectures\nbool IsARMMidgard(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::ARM_Midgard;\n}\nbool IsARMBifrost(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::ARM_Bifrost;\n}\nbool IsARMValhall(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::ARM_Valhall;\n}\n// Google architectures\nbool IsGoogleSwiftshader(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Google_Swiftshader;\n}\n// Intel architectures\nbool IsIntelGen7(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Intel_Gen7;\n}\nbool IsIntelGen8(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Intel_Gen8;\n}\nbool IsIntelGen9(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Intel_Gen9;\n}\nbool IsIntelGen11(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Intel_Gen11;\n}\nbool IsIntelGen12LP(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Intel_Gen12LP;\n}\nbool IsIntelGen12HP(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Intel_Gen12HP;\n}\n// Microsoft architectures\nbool IsMicrosoftWARP(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Microsoft_WARP;\n}\n// Nvidia architectures\nbool IsNvidiaFermi(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Nvidia_Fermi;\n}\nbool IsNvidiaKepler(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Nvidia_Kepler;\n}\nbool IsNvidiaMaxwell(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Nvidia_Maxwell;\n}\nbool IsNvidiaPascal(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Nvidia_Pascal;\n}\nbool IsNvidiaTuring(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Nvidia_Turing;\n}\nbool IsNvidiaAmpere(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Nvidia_Ampere;\n}\n// Qualcomm architectures\nbool IsQualcommAdreno4xx(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Qualcomm_Adreno4xx;\n}\nbool IsQualcommAdreno5xx(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Qualcomm_Adreno5xx;\n}\nbool IsQualcommAdreno6xx(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Qualcomm_Adreno6xx;\n}\nbool IsQualcommAdreno7xx(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Qualcomm_Adreno7xx;\n}\n// Samsung architectures\nbool IsSamsungRDNA2(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    return GetArchitecture(vendorId, deviceId) == Architecture::Samsung_RDNA2;\n}\n\n// GPUAdapterInfo fields\nstd::string GetVendorName(PCIVendorID vendorId) {\n    switch(vendorId) {\n        case kVendorID_AMD: return \"amd\";\n        case kVendorID_Apple: return \"apple\";\n        case kVendorID_ARM: return \"arm\";\n        case kVendorID_Google: return \"google\";\n        case kVendorID_ImgTec: return \"img-tec\";\n        case kVendorID_Intel: return \"intel\";\n        case kVendorID_Mesa: return \"mesa\";\n        case kVendorID_Microsoft: return \"microsoft\";\n        case kVendorID_Nvidia: return \"nvidia\";\n        case kVendorID_Qualcomm: return \"qualcomm\";\n        case kVendorID_Samsung: return \"samsung\";\n    }\n\n    return \"\";\n}\n\nstd::string GetArchitectureName(PCIVendorID vendorId, PCIDeviceID deviceId) {\n    Architecture arch = GetArchitecture(vendorId, deviceId);\n    switch(arch) {\n        case Architecture::Unknown:\n            return \"\";\n        case Architecture::AMD_GCN2:\n            return \"gcn-2\";\n        case Architecture::AMD_GCN5:\n            return \"gcn-5\";\n        case Architecture::AMD_RDNA2:\n            return \"rdna-2\";\n        case Architecture::AMD_GCN1:\n            return \"gcn-1\";\n        case Architecture::AMD_GCN3:\n            return \"gcn-3\";\n        case Architecture::AMD_GCN4:\n            return \"gcn-4\";\n        case Architecture::AMD_RDNA1:\n            return \"rdna-1\";\n        case Architecture::ARM_Midgard:\n            return \"midgard\";\n        case Architecture::ARM_Bifrost:\n            return \"bifrost\";\n        case Architecture::ARM_Valhall:\n            return \"valhall\";\n        case Architecture::Google_Swiftshader:\n            return \"swiftshader\";\n        case Architecture::Intel_Gen7:\n            return \"gen-7\";\n        case Architecture::Intel_Gen8:\n            return \"gen-8\";\n        case Architecture::Intel_Gen9:\n            return \"gen-9\";\n        case Architecture::Intel_Gen11:\n            return \"gen-11\";\n        case Architecture::Intel_Gen12LP:\n            return \"gen-12lp\";\n        case Architecture::Intel_Gen12HP:\n            return \"gen-12hp\";\n        case Architecture::Microsoft_WARP:\n            return \"warp\";\n        case Architecture::Nvidia_Fermi:\n            return \"fermi\";\n        case Architecture::Nvidia_Kepler:\n            return \"kepler\";\n        case Architecture::Nvidia_Maxwell:\n            return \"maxwell\";\n        case Architecture::Nvidia_Pascal:\n            return \"pascal\";\n        case Architecture::Nvidia_Turing:\n            return \"turing\";\n        case Architecture::Nvidia_Ampere:\n            return \"ampere\";\n        case Architecture::Qualcomm_Adreno4xx:\n            return \"adreno-4xx\";\n        case Architecture::Qualcomm_Adreno5xx:\n            return \"adreno-5xx\";\n        case Architecture::Qualcomm_Adreno6xx:\n            return \"adreno-6xx\";\n        case Architecture::Qualcomm_Adreno7xx:\n            return \"adreno-7xx\";\n        case Architecture::Samsung_RDNA2:\n            return \"rdna-2\";\n    }\n\n    return \"\";\n}\n\n}  // namespace gpu_info\n"}